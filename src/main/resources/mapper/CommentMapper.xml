<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="blog.mapper.CommentMapper">

    <insert id="saveComment" parameterType="blog.entity.Comment">
        insert into blog.t_comment (nickname, email, content, create_time, blog_id, parent_comment_id,parent_nickname)
        values (#{nickname}, #{email}, #{content}, #{createTime}, #{blogId}, #{parentCommentId}, #{parentNickname});
    </insert>


    <select id="findByBlogIdParentIdNull" resultType="blog.entity.Comment">
        select c.id cid,
               c.nickname,
               c.email,
               c.content,
               c.create_time,
               c.blog_id,
               c.parent_comment_id,
               c.parent_nickname
        from blog.t_comment c
        where c.blog_id = #{blogId}
          and c.parent_comment_id = #{blogParentId}
        order by c.create_time desc
    </select>

    <select id="findByParentCommentId" resultType="blog.entity.Comment">
        select c.id cid,
               c.nickname,
               c.email,
               c.content,
               c.create_time,
               c.blog_id,
               c.parent_comment_id,
               c.parent_nickname
        from blog.t_comment c
        where c.parent_comment_id = #{parentCommentId}
    </select>

</mapper>